<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="app.css"/>
    <link href="https://fonts.googleapis.com/css?family=Poppins:400,600" rel="stylesheet">
    <link href="animate.css" rel="stylesheet">
    <link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.min.css">
    <script src="jquery.min.js"></script>
    <script src="jquery.animatecss.js"></script>
    <script src="chart.bundle.min.js"></script>
</head>
<body class="miner">
  <a href="#" class="settings-button"><i class="fa fa-gear"/></i></a>
  <a href="#" class="help-button"><i class="fa fa-question-circle-o"/></i></a>
  <div class="grid">
    <div class="info">
      <div class="logo">
        <img src="i/stellite-miner-logo.png"/>
      </div>
      <div class="section spec">
        <table class="stats">
          <tr>
            <td class="title">
              Ticker
            </td>
            <td>
              XTL
            </td>
          </tr>
          <tr>
            <td class="title">
              Supply
            </td>
            <td>
              21 billion
            </td>
          </tr>
          <tr>
            <td class="title">
              Circulation
            </td>
            <td>
              2.1 billion (~10%)
            </td>
          </tr>
          <tr>
            <td class="title">
              Market cap
            </td>
            <td>
              USD 3 million
            </td>
          </tr>
          <tr>
            <td class="title">
              Price
            </td>
            <td>
              0.00000020 BTC
            </td>
          </tr>
        </table>
      </div>
      <div class="section network">
        <h3>Network</h3>
        <table class="stats">
          <tr>
            <td class="title">
              Hashrate
            </td>
            <td>
              20 MH/s
            </td>
          </tr>
          <tr>
            <td class="title">
              Difficulty
            </td>
            <td>
              1 234 912 392
            </td>
          </tr>
          <tr>
            <td class="title">
              Height
            </td>
            <td>
              108 000
            </td>
          </tr>
        </table>
      </div>
      <div class="section exchanges">
        <h3>Exchanges</h3>
        <table class="stats">
          <tr>
            <td class="title">
              Volume today
            </td>
            <td>
              30.3264 BTC
            </td>
          </tr>
          <tr>
            <td class="title">
              TradeOgre
            </td>
            <td>
              3.4222 BTC
            </td>
          </tr>
          <tr>
            <td class="title">
              Crex24
            </td>
            <td>
              1.8239 BTC
            </td>
          </tr>
        </table>
      </div>
      <div class="section records">
        <h3>Records</h3>
        <table class="stats">
          <tr>
            <td class="title">
              Peak volume
            </td>
            <td>
              30.3264 BTC
            </td>
          </tr>
          <tr>
            <td class="title">
              Highest price
            </td>
            <td>
              0.000000023 BTC
            </td>
          </tr>
        </table>
      </div>
      <div class="section contact">
        <h3>Contact</h3>
        <div class="links">
          <a target="_blank" href="https://www.stellite.cash">Official Website</a>
          <a target="_blank" href="https://bitcointalk.org/index.php?topic=2813261.0">ANN</a>
          <a target="_blank" href="https://discord.gg/8PhF342">Discord</a>
          <a target="_blank" href="https://www.reddit.com/r/stellite/">Reddit</a>
          <a target="_blank" href="https://github.com/stellitecoin">GitHub</a>
          <a target="_blank" href="https://www.facebook.com/stellitecash">Facebook</a>
          <a target="_blank" href="https://twitter.com/stellitecash">Twitter</a>
        </div>
      </div>
    </div>
    <div class="mining">
      <div class="miner">
        <div class="mining-stats">
          <div class="hashrate">
            <span id="hashsec">0</span> H/s
          </div>
          <div class="detail">Hashrate</div>
          <a href="#" class="button stop small">Stop Mining</a>
          <div class="xmrstak">
            <table>
              <tr>
                <th>
                  Mining Time
                </th>
                <th>
                  Difficulty
                </th>
                <th>
                  Total Shares
                </th>
                <th>
                  Bad Shares
                </th>
              </tr>
              <tr>
                <td>
                  <span id="xmr_uptime"></span>
                </td>
                <td>
                  <span id="diff_current"></span>
                </td>
                <td>
                  <span id="shares_total"></span>
                </td>
                <td>
                  <span id="shares_bad"></span>
                </td>
              </tr>
            </table>
          </div>
          <div class="payment">
            <div class="estimate">
              <div class="detail">you are mining an estimated</div>
              <div id="payout">10.00 XTL</div>
              <div class="detail">per day</div>
            </div>
            <div class="address">
              <pre>
Se3z4zz9Fgp25NrfA16KcePctEFAbupVzNieg9CmU4dWV1Z2mJ1ZaYjW9R3cMtrTZEYaHrFvxQH25aeqeNw4aMqR2tXWA3574
              </pre>
              <div class="detail">Stellite Wallet Address</div>
            </div>
          </div>
        </div>
        <!-- <a href="#" class="button start">Start Mining</a>
        <a href="#" class="button stop">Stop Mining</a> -->

      </div>
      <div class="pool">
        <h3>Community Pool <a href="#" class="info-block dull">Change</a></h3>
        <a href="https://communitypool.stellite.cash" target="_blank" class="address">https://communitypool.stellite.cash</a>
        <div class="stats">
          <table>
            <tr>
              <th>
                Hash Rate
              </th>
              <th>
                Miners
              </th>
              <th>
                Last Block Found
              </th>
              <th>
                Last Payment
              </th>
            </tr>
            <tr>
              <td>
                13.32 MH/s
              </td>
              <td>
                1 203
              </td>
              <td>
                3 hours ago
              </td>
              <td>
                10 seconds ago
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
    <div class="chart" style="position:relative">
      <canvas id="hashrate_chart" width="400" height="400"></canvas>
    </div>
    <div class="footer">
      made with <i class="fa fa-heart"/></i> across the globe
    </div>
  </div>
  <div id="settings" class="settings dn">
    <div class="header">
      <h2>Miner Settings</h2>
    </div>
    <div class="section address">
      <p>
        Stellite address to mine to
      </p>
      <div>
        <input id="settings_mining_address" type="text" placeholder="Your Stellite address" value="current address"/>
      </div>
    </div>
    <div class="section pools">
      <p>
        Mining pool
      </p>
      <div class="pool-selection">

      </div>
    </div>
    <div class="section action">
      <a class="button cancel" href="#">
        Cancel
      </a>
      <a class="button ok" href="#">
        Update
      </a>
    </div>
  </div>

  <div id="help" class="help">
    <div class="header">
      <h2>What's next?</h2>
    </div>
    <div class="section">
      <p class="ac">
        You are mining and earning Stellite coins, what should you do now?
      </p>
      <ol>
        <li>
          Visit the mining pool you have chosen, enter your Stellite address to see your payment history, set payment limits and see more stats
        </li>
        <li>
          Learn more about the Stellite project and what it brings to the
          cryptocurrency world by visiting the <a class="link" target="_blank" href="https://www.stellite.cash">official Stellite website</a>
        </li>
        <li>
          Join the amazing Stellite community on <a class="link" target="_blank" href="https://discord.gg/8PhF342">Discord</a>, even if you just want to say hi
        </li>
        <li>
          Trade your Stellite for Bitcoin on an exchange
        </li>
        <li>
          Learn more about the xmr-stak miner and how to set up GPU mining on their <a class="link" target="_blank" href="https://github.com/fireice-uk/xmr-stak">GitHub page</a>
        </li>
      </ol>
    </div>
    <div class="header">
      <h2>Having problems?</h2>
    </div>
    <div class="section">
      <p>
        The Stellite community is very friendly and always ready to help. Join us in the <a class="link" target="_blank" href="https://discord.gg/8PhF342">#mining</a>
        channel on <a class="link" target="_blank" href="https://discord.gg/8PhF342">Discord</a>
        and we'll help you out.
      </p>
    </div>
    <div class="section action">
      <a class="button back" href="#">
        Close
      </a>
    </div>
  </div>

  <script src="app.js"></script>
  <script type="text/javascript">
    //app.init();

    var chart = $("#hashrate_chart");
    chart.attr('width', $('.chart').width());
    chart.attr('height', $('.chart').height());

    var myChart = new Chart(chart, {
    type: 'line',
          data: {
              labels: ["15 minutes ago", "10 minutes ago", "5 minutes ago", "Now"],
              datasets: [{
                  label: 'H/s',
                  data: [10,15,25,11],
                  backgroundColor: [
                      'rgba(13, 17, 45, 1.0)'
                  ],
                  borderColor: [
                      'rgba(232,212,0,9)'
                  ],
                  borderWidth: 1,
              }]
          },
          options: {
            responsive: true,
            tooltips: {
					         mode: 'index',
					              intersect: false,
				    },
				hover: {
					mode: 'nearest',
					intersect: true
				},
            legend: {
              display: false,
            },
            elements: {
                line: {
                    tension: 0, // disables bezier curves
                },
            },
            layout: {
                padding: {
                    left: 0,
                    right: 0,
                    top: 0,
                    bottom: 0
                }
            },
            scales:
            {
                yAxes: [{
                    //display: false
                }]
            }
          }
      });


    function calcEstimateProfit(hashrate){
        try {
            var xtlPerDay = (hashrate * 86400 / 1205230299) * 17878.36;
            $('#payout').html(xtlPerDay.toFixed(2) + ' XTL');
        }
        catch(e){ }
    }

    window.setInterval(function(){
      console.log("GetStats");

      $.get("http://stellite.live.local/site/xmr", function( data ) {
        var hashrate = data.hashrate.total[0];
        var difficulty = data.results.diff_current;
        var shares_total = data.results.shares_total;
        var shares_bad = shares_total - data.results.shares_good;
        var uptime = data.connection.uptime;
        $('#xmr_uptime').html(uptime + ' sec');
        $('#diff_current').html(difficulty);
        $('#shares_total').html(shares_total);
        $('#shares_bad').html(shares_bad);
        $('#hashsec').html(hashrate);
        calcEstimateProfit(hashrate);
      });
    }, 2000);
  </script>
</body>
</html>
